\section{Problem Statement}

We consider a seller with a total resource budget $B$ and a strictly convex production cost function $f:[0,B]\to\mathbb{R}_{+}$. The seller offers the divisible resource to a sequence of buyers indexed by $t\in\{1,\dots,T\}$, with the total number of buyers $T$ unknown. Each buyer $t$ is characterized by a per-unit value $v_t$ and an allocation rate limit $r_t$, their group identity $ j_t \in [K]$ and arrives sequentially over time.

When buyer $t$ arrives, the seller must irrevocably choose an allocation decision $x_t\in[0,r_t]$ without any information about future buyers. Let $\{x_t\}_{t=1}^T$ denote the resulting allocation, which must satisfy two key constraints.

First, the total allocation cannot exceed the resource budget:
\[
    \sum_{t\in[T]} x_t \leq B.
\]
Second, there is an allocation quota $m_j \geq 0 $ that must be met for each group $j\in[K]$:
\[
    \sum_{t\in[T]: j_t = j} x_t \geq m_j, \quad \forall j \in [K].
\]
We define $ M = \sum_{j\in[K]} m_j $ as the total allocation quota across all groups.

Given an allocation $\{x_t\}_{t=1}^T$, the social welfare is defined as the total value derived from the buyers minus the production cost incurred by the seller:
\[
    \sum_{t\in[T]} v_t x_t - f\left(\sum_{t\in[T]} x_t\right).
\]

\subsection{Problem Assumptions}

We make the following assumptions regarding the problem setting:

\begin{assumption}[Bounded Valuations]\label{assumption-bounded-value}
    For each buyer $t \in [T]$ from group $j_t \in [K]$, the per-unit value $v_t$ lies within a known bounded interval $[1, \theta_j]$, where $\theta_j \geq 1$ is a constant. Without loss of generality, we assume $ \theta_0 = 1 $ and $ \theta_1 \leq \theta_2 \leq \dots \leq \theta_K $.
\end{assumption}

\begin{assumption}[Quota Feasibility]\label{assumption-quota-feasibility}
    For each class $ j \in [K] $, the total amount of requested resources from all buyers in group $ j $ is sufficient to meet the quota requirement, i.e.,
    \[
        \sum_{t\in[T]: j_t = j} r_t \geq m_j.
    \]
\end{assumption}

\begin{assumption}[Quota Profitability]\label{assumption-quota-profitability}
    We assume $f'(M) \leq 1$ (or equivalently, for all $v \in [1, \theta_j]$, $B(v) \geq M$, or $\underline{B} \geq M$) to ensure that it is always profitable for the seller to satisfy the quota requirement.
\end{assumption}

\subsection{Problem Formulation}

Formally, a problem setting can be defined by the following two components:

\begin{itemize}
    \item A \emph{setup} $S = \bigl(B,\,M,\,f,\,\{\theta_j\}_{j=1}^K\bigr)$ that includes information known a priori to the seller, where:
          \begin{itemize}
              \item $B > 0$ is the total resource budget,
              \item $M \in (0,B]$ is the allocation quota,
              \item $f : [0,B] \to \mathbb{R}_{+}$ is the production cost function,
              \item $ K $ is the number of buyer groups,
              \item $\{\theta_j\}_{j=1}^K$ are the upper bounds on buyers' per-unit valuations for each group (Assumption~\ref{assumption-bounded-value}).
          \end{itemize}

    \item An \emph{instance} $I = \bigl\{(v_t, r_t, j_t)\bigr\}_{t=1}^{T}$ denoting the sequence of arriving buyers, where:
          \begin{itemize}
              \item Each buyer $t$ is defined by a per-unit value $v_t \in [1,\theta_{j_t}]$, their group $j_t \in [K]$, and an allocation rate limit $r_t \ge 0$,
              \item The total number of buyers $T$ is unknown a priori.
          \end{itemize}
\end{itemize}

\subsection{Offline Optimal Solution}

Let $\Omega$ denote the set of all possible arrival instances satisfying Assumptions~\ref{assumption-bounded-value}, \ref{assumption-quota-feasibility}, and \ref{assumption-quota-profitability}. For any instance $I \in \Omega$, the offline optimal performance $\OPT(I)$ can be obtained by solving the following optimization problem:
\begin{subequations}\label{equation-quota-primal}
    \begin{align}
        \max_{x_t\in[0, r_t]} \quad & \sum_{t\in [T]} v_t x_t - f\left(\sum_{t\in[T]} x_t\right)     \\
        \text{subject to} \quad     & \sum_{t\in[T]} x_t \leq B,                                     \\
                                    & \sum_{t\in[T]: j_t = j} x_t \geq m_j, \quad \forall j \in [K].
    \end{align}
\end{subequations}

Our design objective is to develop online algorithms that are competitive against $\OPT(I)$ for any instance $I \in \Omega$ while satisfying the budget and quota constraints.

\section{Preliminaries}
Given a setup $S = \bigl(B,\,M,\,f,\,\{\theta_j\}_{j=1}^K\bigr)$, we introduce several notations that will be used throughout this chapter. The mathematical definitions remain the same as above; here we organize them more systematically.

We first define the \emph{marginal cost} as $f'(y)$ for any $y \in [0,B]$. The minimum and maximum marginal costs are then
\[
    \underline{c} = f'(0), \qquad \overline{c} = f'(B).
\]
Based on the marginal cost, we define the \emph{production function}
\[
    B(v) =
    \begin{cases}
        f'^{-1}(v), & v\in (\underline{c}, \overline{c}), \\
        B,          & v\in [\overline{c}, \infty),
    \end{cases}
\]
which represents the maximum number of units that can be profitably produced at a marginal cost not exceeding $v$.

From $ B(v) $, we can further define the \emph{minimum production level} $ \underline{B} $ and the \emph{maximum production level} $ \overline{B} $ as follows.

\[
    \underline{B} =
    \begin{cases}
        f'^{-1}(1), & 1\in (\underline{c}, \overline{c}), \\
        B,          & \overline{c} \leq 1,
    \end{cases}
\]
denotes the maximum number of resources produced when all arrivals have value $1$. Conversely, the \emph{maximum production level}
\[
    \overline{B} =
    \begin{cases}
        f'^{-1}(\theta), & \theta\in (\underline{c}, \overline{c}), \\
        B,               & \overline{c} \leq \theta,
    \end{cases}
\]
denotes the maximum number of resources produced when all arrivals have value $\theta$.

Next, we extend the production cost function to the entire non-negative real line by defining
\[
    \bar{f}(y) =
    \begin{cases}
        f(y),   & y\in [0, B],       \\
        \infty, & y \in (B, \infty).
    \end{cases}
\]
For any unit price $v$, the \emph{profit function}
\[
    F_v(y) = v y - \bar{f}(y)
\]
represents the profit from selling $y$ units at price $v$. We then define the \emph{maximum profit function}
\[
    h(v) =
    \begin{cases}
        v\cdot B(v) - f(B(v)),                                                                                           & v\in [1, \theta_1],        \\
        \sum_{j=1}^{K-1} \boldsymbol{1}_{v\in [\theta_j ,\theta_{j+1}]} \Big[v\cdot C_{j+1}(v) + D_{j+1} - f(B(v))\Big], & v\in [\theta_1, \theta_K],
    \end{cases}
\]
which gives the optimal profit attainable when the highest per-unit value in the arrival sequence is $v$. Here,
\(C_j(v) = B(v) - \sum_{i=1}^{j-1} m_i\) is the remaining production capacity after satisfying the quota requirements of groups \(1\) through \(j-1\), and
\(D_j = \sum_{i=1}^{j-1} m_i \theta_i\) is the maximum value from meeting those quota requirements.

\begin{remark}
    Given that $ f $ is strictly convex and differentiable on $ [0, B] $, its derivative $ f' $ is strictly increasing on $ [0, B] $ and therefore admits a continuous inverse $ B(v) $. Furthermore, $ h $ is concave and continuous on $ [1, \theta_K] $ and differentiable on each open interval $ (\theta_j, \theta_{j+1}) $, with $ h'(v) = C_{j+1}(v) $ for $ v $ in each open interval $ (\theta_j, \theta_{j+1}) $.
\end{remark}

\section{Sufficient Conditions}

 {\color{red}Posted price mechanism to go here.}


The key to the posted price mechanism is to design a pricing function $ \phi(u) $ that dynamically adjusts the unit price based on the cumulative allocation $ u $ made so far.



\begin{theorem}\label{therem-sufficient-cost-quota}
    Given a setup $ S $, the posted price mechanism with pricing function $\phi$ is $\alpha$-competitive if $\phi$ satisfies
    \begin{equation}\label{eq:phi-definition}
        \phi(u) =
        \begin{cases}
            1,          & u \in [0, \omega],            \\
            \varphi(u), & u \in (\omega, \overline{B}], \\
            \infty,     & u \in (\overline{B}, \infty],
        \end{cases}
    \end{equation}
    where $\omega$ is a resource-utilization threshold such that
    \begin{equation}\label{eq:omega-condition}
        F_1(\omega) \geq \frac{1}{\alpha} h(1)
        \quad\text{and}\quad
        M \leq \omega \leq \underline{B},
    \end{equation}
    and $ \varphi(u) $ is an increasing function that satisfies
    \begin{equation}\label{eq:phi-incremental-condition}
        \begin{cases}
            \varphi'(u) \leq \alpha \cdot \frac{\varphi(u) - f'(u)}{h'(\varphi(u))}
            \quad\text{for } u \in [\omega, \overline{B}] \\
            \varphi(\omega) = 1, \varphi(\overline{B}) \geq \theta
        \end{cases}
    \end{equation}
\end{theorem}

\begin{proof}
    For a given setup $ S $ and an instance $ I \in \Omega $ with arrival sequence $ \{(v_t, r_t)\}_{t=1}^T $, Let $ u $ denote the final total allocation level made by the online algorithm on $ I $, and let $ \ALG(I) $ and $ \OPT(I) $ be the corresponding online and offline performances.

    From the definition of the maximum profit function, we can upper bound the offline optimal performance as
    \begin{align*}
        \OPT(I) \leq h\bigl(\max_t v_t\bigr).
    \end{align*}

    Given that $ u $ denotes the final utilization level of the online algorithm, we have $ \max_t v_t \leq \varphi(u) $ by the design of the posted price mechanism. Therefore,
    \begin{align*}
        \OPT(I) \leq h(\varphi(u)).
    \end{align*}

    On the other hand, the online algorithm's performance on $ I $ can be lower bounded as
    \begin{align*}
        \ALG(u) & \geq \int_{0}^{u} \varphi(y)dy - f(u)                                                            \\
                & = \int_{0}^{\omega} 1 dy + \int_{\omega}^{u} \varphi(y)dy - f(\omega) - \int_{\omega}^{u}f'(y)dy \\
                & = \omega - f(\omega) + \int_{\omega}^{u} (\varphi(y) - f'(y))dy                                  \\
    \end{align*}

    Define the auxiliary function $ H(u) = \ALG(u) - \frac{1}{\alpha} h(\varphi(u)) $ to denote the performance gap of the online algorithm against the offline optimal to be $ \alpha $-competitive. If we can show that $ H(u) \geq 0 $ for all $ u \in [0, \overline{B}] $, then we have that the online algorithm is $ \alpha $-competitive against any instance $ I \in \Omega $. This can be achieved by first establishing an initial inequality at $ u = \omega $ and then showing an incremental inequality for all $ u \in [\omega, \overline{B}] $.

    \textbf{Initial inequality:} We first argue that the online algorithm always allocates at least $M$ units. By Assumption~\ref{assumption-quota-feasibility}, there are enough arrivals to meet all quotas, and by construction the first $\omega$ units are allocated unconditionally at price $1$. If the total requested amount is less than $\omega$, then, since $\omega \leq \underline{B}$, it is profitable for both the online and offline solutions to allocate all requested resources, implying $\ALG(I) = \OPT(I)$ in this case.

    At $ u = \omega $, we have the following initial inequality:
    \begin{align*}
        H(\omega) & = \omega - f(\omega) - \frac{1}{\alpha} h(1)                                    \\
                  & = F_1(\omega) - \frac{1}{\alpha} h(1)                                           \\
                  & \geq 0 \quad \text{(by the choice of $ \omega $ in \eqref{eq:omega-condition})}
    \end{align*}

    \textbf{Incremental inequality and monotonicity of $ H $:} Next, we verify the incremental condition to ensure that $ H(u) $ is non-decreasing on $ [\omega, \overline{B}] $. Taking the derivative of $ H(u) $ with respect to $ u $, we have
    \begin{align*}
        H'(u) & = \varphi(u) - f'(u) - \frac{1}{\alpha} h'(\varphi(u)) \cdot \varphi'(u) \\
    \end{align*}

    To guarantee that $ H $ is non-decreasing, it suffices to require $ H'(u) \geq 0 $ for all $ u \in [\omega, \overline{B}] $. From the above equation, this is equivalent to
    \begin{align*}
        \varphi'(u) \leq \alpha \cdot \frac{\varphi(u) - f'(u)}{h'(\varphi(u))} \quad\text{for } u \in [\omega, \overline{B}].
    \end{align*}
    which is precisely the incremental condition in \eqref{eq:phi-incremental-condition}.

    Since $ H(\omega) \geq 0 $ and $ H'(u) \geq 0 $ for all $ u \in [\omega, \overline{B}] $, we obtain $ H(u) \geq 0 $ for all $ u \in [\omega, \overline{B}] $. For $ u < \omega $, the online algorithm allocates all requested resources, leading to $ \ALG(I) = \OPT(I) $. Therefore, the posted price mechanism with pricing function $ \phi $ is $ \alpha $-competitive. Finally, given that $ \phi(u) = \infty $ for all $ u > \overline{B} $ and $ \overline{B} \leq B $, the online algorithm will never exceed the resource budget.

\end{proof}

\section{Necessary Conditions}
Throughout the proofs, we assume $ r_t = B $ for all $ t\in [T] $ for ease of exposition, and thus denoting an arrival instance as $ I = \{(v_1, j_1), (v_2, j_2), \cdots, (v_T, j_T) \} $, where $ (v_t, j_t) $ represents an arrival from class $ j_t $ with value $ v_t $.

\begin{definition}
    \textbf{Hard Instance Family for Quota with Production Costs.}
    Consider the construction of the hard instance $ \mathcal{I}^{\mathrm{Q}} $, where there is a continuum of values increasing from $ 1 $ to $ \theta_K $, with each value repeated for every class as long as it remains feasible:
    \begin{align*}
        \mathcal{I}^{\mathrm{Q}}= \Biggl\{ & \underbrace{(1, 1), (1,2), \dots , (1, K)}_{K\textit{ agents}}, \underbrace{(1+\epsilon, 1), \dots, (1+\epsilon, K)}_{K\textit{ agents}}, \dots,                                                                                            \\
                                           & \underbrace{(\theta_{1}, 1), \dots ,(\theta_{1}, K)}_{K\textit{ agents}}, \underbrace{(\theta_{1}+\epsilon, 2), \dots , (\theta_{1}+\epsilon, K)}_{K-1 \textit{ agents}}, \dots, \underbrace{(\theta_{K}, K)}_{1\textit{ agent}}  \Biggr\}.
    \end{align*}
    Based on the above construction of $ \mathcal{I}^{\mathrm{Q}} $, we then consider the family of instances $ \{\mathcal{I}^{\mathrm{Q}}_v\}_{v \in [1, \theta_K]} $, where each $\mathcal{I}^{\mathrm{Q}}_v$ instance has the structure as $ \mathcal{I}^{\mathrm{Q}} $ but is truncated up until and including arrivals with value $ v $.
\end{definition}


\begin{theorem}\label{theorem-quota-general-necessary-conditions}
    extbf{Necessary Conditions for Quota with Production Costs.}
    If there exists an $ \alpha $-competitive online algorithm that also satisfies the quota requirement, then there must exist a parameter $ \omega $ that satisfies
    \begin{equation}\label{equation-quota-omega}
        \begin{aligned}
            F_1(\omega) = \frac{1}{\alpha} h(1), \text{ and } M \leq \omega \leq \underline{B}.
        \end{aligned}
    \end{equation}
    such that there exists a non-decreasing utilization function $ \psi(v): [1, \theta_K] \to [\omega, \bar{B}] $ that satisfies

    \begin{equation}\label{equation-quota-utilization}
        \begin{aligned}
            \begin{cases}
                \psi(1) + \int_{1}^{v} u d\psi(u) - f(\psi(v)) \geq & \frac{1}{\alpha} \Big[v(B(v) - M) + v\sum\limits_{i\geq j}m_i                                   \\
                                                                    & + \sum\limits_{i < j} m_i\theta_i - f(B(v))\Big], \quad \forall v \in [\theta_{j-1}, \theta_j], \\
                \psi(1) = \omega, \psi(\theta_K) \leq \bar{B}.
            \end{cases}
        \end{aligned}
    \end{equation}
\end{theorem}
\begin{proof}
    \textbf{Boundary conditions.}
    The utilization of any online algorithm cannot exceed the maximum profitable production level, hence
    \[
        \psi(\theta_K) \le \overline{B}.
    \]
    Consider the instance $\mathcal{I}^{\mathrm{Q}}_1$, where all arrivals have value $1$. By Assumptions~\ref{assumption-quota-feasibility} and \ref{assumption-quota-profitability}, it is feasible and profitable to first satisfy all quotas $m_j$ and then keep allocating to value-$1$ buyers until the marginal cost reaches $1$, i.e., until total production reaches $\underline{B}$. Thus
    \[
        \OPT(\mathcal{I}^{\mathrm{Q}}_1) = h(1) = F_1(\underline{B}) = \underline{B} - f(\underline{B}).
    \]
    Any $\alpha$-competitive online algorithm must therefore achieve at least $\frac{1}{\alpha} h(1)$ profit on $\mathcal{I}^{\mathrm{Q}}_1$ while allocating at least $M$ units to satisfy the quotas. Since $\omega$ is defined as the \emph{minimum} allocation level at which this is possible and satisfies
    \[
        F_1(\omega) = \omega - f(\omega) = \frac{1}{\alpha} h(1), \quad M \le \omega \le \underline{B},
    \]
    the algorithm's utilization level at value $1$ must therefore satisfy
    \[
        \psi(1) = \omega.
    \]

    \textbf{Incremental Inequalities.}
    Given that decisions are irrevocable, the utilization function $\psi$ must be non-decreasing, i.e.,
    $
        \psi : [1,\theta_K] \to [\omega,\overline{B}] \quad\text{is non-decreasing.}
    $

    Fix $v \in [\theta_{j-1},\theta_j]$ for some $j\in[K]$ and consider the truncated hard instance $\mathcal{I}^{\mathrm{Q}}_v$. By construction, the maximum value in $\mathcal{I}^{\mathrm{Q}}_v$ is $v$, and the maximum profitable total production is therefore $B(v)$.

    In any quota satisfying offline solution for $\mathcal{I}^{\mathrm{Q}}_v$, at least $m_i$ units must be allocated to each group $i$. For group $i<j$ with highest value $\theta_i$ less than $v$, quota allocations yield at most $m_i\theta_i$; for groups $i\ge j$ with highest value at least $v$, they yield at most $m_iv$. The remaining $B(v)-M$ units, if any, yield at most $v$ per unit. Hence
    \[
        \OPT(\mathcal{I}^{\mathrm{Q}}_v)
        \le v(B(v)-M) + v\sum_{i\ge j} m_i + \sum_{i<j} m_i \theta_i - f(B(v)).
    \]

    For any online algorithm with utilization function $\psi$, its performance on instance $\mathcal{I}^{\mathrm{Q}}_v$ can be lower bounded as
    \begin{align*}
        \ALG(\mathcal{I}^{\mathrm{Q}}_v) \geq \psi(1) + \int_{1}^{v} u \, d\psi(u) - f(\psi(v)).
    \end{align*}

    Thus, to guarantee $ \alpha $-competitiveness against the arrival instance $ \mathcal{I}^{\mathrm{Q}}_v $, the following inequality has to hold for all $ v \in [\theta_{j-1}, \theta_j] $:
    \begin{align*}
        \psi(1) + \int_{1}^{v} u d\psi(u) - f(\psi(v)) \geq & \frac{1}{\alpha} \Big[v(B(v) - M) + v\sum\limits_{i\geq j}m_i + \sum\limits_{i < j} m_i\theta_i - f(B(v))\Big]
    \end{align*}

    Putting it together, if there exists an $ \alpha $-competitive online algorithm that satisfies the quota requirement, then there must exist a non-decreasing utilization function $ \psi(v) $ that satisfies the above inequality with boundary conditions $ \psi(1) = \omega $ and $ \psi(\theta_K) \leq \bar{B} $, as stated in equation \eqref{equation-quota-utilization}.
\end{proof}



Given the general necessary conditions in Theorem \ref{theorem-quota-general-necessary-conditions}, we now show the existence of strictly increasing allocation and pricing functions that satisfy them.
\begin{theorem}
    If there exists an $ \alpha $-competitive online algorithm that satisfies the quota requirement, then the following conditions must hold:
    \begin{itemize}
        \item there exists a strictly increasing allocation function $ \psi(v) $ such that
              \begin{equation}\label{equation-quota-increasing-utilization}
                  \begin{aligned}
                      \begin{cases}
                          \psi'(v) = \frac{1}{\alpha}\cdot \frac{h'(v)}{v - f'(\psi(v))}, \quad & v\in (\theta_{j-1}, \theta_j), \\
                          \psi(1) = \omega, \psi(\theta_K) \leq \bar{B}.
                      \end{cases}
                  \end{aligned}
              \end{equation}
        \item there exists a strictly increasing pricing function $ \varphi(u) $ such that
              \begin{equation}\label{equation-quota-increasing-pricing}
                  \begin{aligned}
                      \begin{cases}
                          \varphi'(u) = \alpha \cdot \frac{\varphi(u) - f'(u)}{h'(\varphi(u))}, \quad & u\in (\omega, \bar{B}), \\
                          \varphi(\omega) = 1, \varphi(\bar{B}) \geq \theta_K.
                      \end{cases}
                  \end{aligned}
              \end{equation}
    \end{itemize}


\end{theorem}

\begin{proof}

    We can interpret $ h(v) / \alpha $ as the minimum profit required for an online algorithm to be $ \alpha $-competitive under the arrival instance $ \mathcal{I}^{\mathrm{Q}}_v $. We can then rewrite the inequality in equation \eqref{equation-quota-utilization} as follows:
    \begin{align}
        \psi(1) + \int_{1}^{v} u \, d\psi(u) - f(\psi(v)) \geq \frac{1}{\alpha} \cdot h(v), \quad \forall v \in [\theta_{j-1}, \theta_j].
    \end{align}
    Using integration by parts, we can rewrite the above inequality as
    \begin{align*}
        \psi(1) + [u\psi(u)]\Big|_1^v -\int_1^v \psi(u) du - f(\psi(v)) & \geq  \frac{1}{\alpha}\cdot h(v) \\
        v\psi(v) - \int_{1}^{v} \psi(u) du - f(\psi(v))                 & \geq \frac{1}{\alpha}\cdot h(v).
    \end{align*}
    Rearranging the terms, we have
    \begin{align*}
        \psi(v) \geq \frac{h(v) + \alpha f(\psi(v))}{\alpha v} + \frac{1}{v} \int_{1}^{v} \psi(u) du.
    \end{align*}

    Let $ M(v) = \frac{h(v) + \alpha f(\psi(v))}{\alpha v} $, $ N(v) = \frac{1}{v} $ and $ Q(\psi(u)) = \psi(u) + f'(\psi(u)) $. We can rewrite the above inequality as
    \begin{align*}
        \psi(v) \geq M(v) + N(v) \int_{1}^{v} Q(\psi(u)) du, v \in [\theta_{j-1}, \theta_j].
    \end{align*}


    Note that the above equation is a non-linear generalization of GrÃ¶nwall's inequality \cite{teschl2012ordinary}. Hence there exists a tightest lower bound $ \psi_L(v) $ such that $ \psi_L(v) \leq \psi(v) $ for all $ v \in [1, \theta_K] $ among all non-decreasing functions $ \psi(v) $ that satisfy the above inequality with boundary conditions $ \psi(1) = \omega $ and $ \psi(\theta_K) \leq \bar{B} $. By definition of this tightest lower bound, $ \psi_L(v) $ satisfies the equality
    \begin{align*}
        \psi_L(v) & = M(v) + N(v) \int_{1}^{v} Q(\psi_L(u)) du,
    \end{align*}
    and, differentiating both sides with respect to $ v $ on any interval $ (\theta_{j-1}, \theta_j) $ where $ h $ is differentiable and $ h'(v) > 0 $, we obtain
    \begin{align*}
        \psi'_L(v) = \frac{1}{\alpha}\cdot \frac{h'(v)}{v - f'(\psi_L(v))}, \quad v \in (\theta_{j-1}, \theta_j).
    \end{align*}
    Here we used that $ M $ and $ N $ are differentiable on each such interval and that $ Q $ is continuous and non-negative, so that the right-hand side is well defined. At each boundary point $ \theta_j $, by the definition of $ h(v) $ and $ B(v) $, both $ N(\theta_j) $ and $ \int_{1}^{\theta_j} Q(\psi_L(u))du $ are continuous, and thus $ N(\theta_j) \int_{1}^{\theta_j} Q(\psi_L(u))du $ is also continuous. The term $ M(v) $ is continuous at $ \theta_j $ since $ h $ is continuous. Therefore, $ \psi_L(v) $ is a continuous function that is strictly increasing over each interval $ (\theta_{j-1}, \theta_j) $. It is therefore overall a strictly increasing function over the entire interval $ [1, \theta_K] $.


    \textbf{Existence of Strictly Increasing Pricing Functions.} Given that $ \psi $ is strictly increasing, its inverse $ \psi^{-1} $ is well-defined and also strictly increasing. Let $ \varphi(u) = \psi^{-1}(u) = v $. Since $ \varphi(u) = \varphi(\psi(v)) = v $, taking derivatives on both sides yields
    \begin{align*}
        \varphi'(\psi(v))\cdot \psi'(v) = 1,
    \end{align*}
    and consequently
    \begin{align*}
        \psi'(v) = \frac{1}{\varphi'(\psi(v))} = \frac{1}{\varphi'(u)}.
    \end{align*}
    Therefore, we have that
    \begin{align*}
        \varphi'(u) = \frac{1}{\psi'(v)}.
    \end{align*}
    Substituting equation \eqref{equation-quota-increasing-utilization} into the above equation and using $ u = \psi(v) $ and $ v = \varphi(u) $, we obtain
    \begin{align*}
        \varphi'(u) = \alpha \cdot \frac{\varphi(u) - f'(u)}{h'(\varphi(u))}, \quad u \in (\omega, \bar{B}),
    \end{align*}
    which is precisely the differential equation in \eqref{equation-quota-increasing-pricing}, together with the boundary conditions $ \varphi(\omega) = 1 $ and $ \varphi(\bar{B}) \geq \theta_K $.
\end{proof}